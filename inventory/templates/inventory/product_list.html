{% extends "inventory/base.html" %} {% block content %}
<h2>Product List</h2>
<!-- Search form -->
<form method="get">
  <input
    type="text"
    name="q"
    placeholder="Search products..."
    value="{{ request.GET.q }}"
  />
  <button type="submit">Search</button>
</form>
<!-- Product list -->
<div class="product-list">
  {% if products %}
  <ul>
    <!-- check if the user is logged in -->
    {% if user.is_authenticated %}
    <a href="{% url 'product_add' %}">Add a Product</a>
    <!-- Loop through the products and display them in a list -->
    {% for product in products %}
    <li>
      <h3>{{ product.name }}</h3>
      <p>Price: {{ product.price }}</p>
      <p>Stock: {{ product.stock }}</p>
      <p>{{ product.description }}</p>
      <!-- You can also include an image if your Product model has an image field -->
      {% if product.image %}
      <img src="{{ product.image.url }}" alt="{{ product.name }}" />
      {% endif %}
      <a href="{% url 'product_edit' product.id %}">Edit</a>
      <a href="{% url 'product_delete' product.id %}">Delete</a>
    </li>
    {% endfor %} {% else %}

    <!-- Loop through the products and display them in a list -->
    {% for product in products %}
    <li>
      <h3>{{ product.name }}</h3>
      <p>Price: {{ product.price }}</p>
      <p>Stock: {{ product.stock }}</p>
      <p>{{ product.description }}</p>
      <!-- You can also include an image if your Product model has an image field -->
      {% if product.image %}
      <img src="{{ product.image.url }}" alt="{{ product.name }}" />

      {% endif %}
      <!-- Add more product details here as needed -->
    </li>
    {% endfor %}
  </ul>
  <a href="{% url 'login' %}">Log In to add a product</a>
  {% endif %} {% else %}
  <p>No products found.</p>

  {% endif %}
</div>
{%endblock %}
